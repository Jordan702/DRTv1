<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DRTv1 Mint Portal</title>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<h1>Mint DRTv1 Tokens</h1>

<form id="mintForm">
  <label>Recipient Address:</label><br>
  <input type="text" id="recipient" required><br><br>
  
  <label>Amount (can be huge, like 11000000000000):</label><br>
  <input type="text" id="amount" required><br><br>
  
  <button type="submit">Mint</button>
</form>

<div id="status"></div>

<script>
document.getElementById("mintForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const recipient = document.getElementById("recipient").value.trim();
    const amountInput = document.getElementById("amount").value.trim();

    if (!recipient || !amountInput) {
        alert("Please fill in both fields!");
        return;
    }

    try {
        // Convert to BigInt and multiply by 10^18 for ERC20 decimals
        const amount = BigInt(amountInput) * 10n ** 18n;
        console.log(`Minting ${amount} tokens to ${recipient}...`);

        const res = await axios.post("https://drtv1-backend.onrender.com/api/mint", {
            recipient,
            amount: amount.toString()
        });

        console.log("Backend response:", res.data);
        document.getElementById("status").innerText = `✅ Mint successful! TxHash: ${res.data.txHash}`;
    } catch (err) {
        console.error("Mint error:", err.response?.data || err.message);
        document.getElementById("status").innerText = `❌ Error: ${err.response?.data?.error || err.message}`;
    }
});
</script>
</body>
</html>
